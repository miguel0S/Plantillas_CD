<!DOCTYPE html>
<html>
<head>
<title>Etiquetas</title>
  <script>
    window.onload = function() {
      window.print();
    };
  </script>
<style>
  body {
    margin: 0;
    padding: 0;
    font-family: 'Arial', sans-serif;
    font-size: 10px;
  }

  .pagina {
    width: 210mm; /* Tamaño A4 */
    height: 297mm;
    padding: 1mm;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
  }

  .fila {
    display: flex;
    width: 100%;
    justify-content: space-between;
    margin-bottom: 10mm; /* Espaciado entre filas */
  }

  .etiqueta {
    width: 100mm;
    height: 70mm;
    /* border: 1px solid black;*/
    padding: 4mm;
    box-sizing: border-box;
    font-size: 12px; /* Aumentado para mejorar la legibilidad */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    border-radius: 5px; /* Bordes redondeados */
  }

  .etiqueta p {
    margin: 1px 0;
    line-height: 1.4;
  }

  .etiqueta span {
    font-weight: bold;
  }

  .etiqueta .title {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 4mm;
    text-align: center;
  }

  .fila .etiqueta {
    margin-right: 8mm;
  }

  .fila .etiqueta:last-child {
    margin-right: 0;
  }

  .fila-debajo {
    display: flex;
    width: 100%;
    justify-content: flex-start;
  }

  .fila-debajo .etiqueta {
    margin-top: 0;
  }

  @media print {
    body {
      margin: 0;
      padding: 0;
    }

    .pagina {
      page-break-after: always;
    }

    .etiqueta {
      /*border: 1px solid black;*/
      box-shadow: none; /* Eliminar sombra al imprimir */
    }
  }
</style>
</head>
<body>

<div class="pagina">
  <!-- Primera fila: dos etiquetas alineadas -->
  <div class="fila">
    <div class="etiqueta" id="etiqueta1">
      <p class="title">BIOBIN S.A.</p>
      <p style="display: flex; justify-content: space-between; width: 88mm">FECHA DE CARGA: <span id="fecha1"></span></p>
        <p style="display: flex; justify-content: space-between; width: 88mm">PRODUCTO: <span id="producto1"></span></p>
        <p style="display: flex; justify-content: space-between; width: 88mm">DESTINO: <span id="cliente1"></span></p>
        <p style="display: flex; justify-content: space-between; width: 88mm">TERMINAL: <span id="terminal1"></span></p>
        <p style="display: flex; justify-content: space-between; width: 88mm">N° REMITO: <span id="remito1"></span></p>
        <p style="display: flex; justify-content: space-between; width: 88mm">PATENTE CAMIÓN: <span id="chasis1"></span></p> 
        <p style="display: flex; justify-content: space-between; width: 88mm">N° PRECINTO: <span id="precinto1"></span></p>
        <p style="display: flex; justify-content: space-between; width: 88mm">N° TAPA MUESTRA: <span id="tapam1"></span></p>
        <p style="display: flex; justify-content: space-between; width: 88mm">N° TAPA CONTRAMUESTRA: <span id="tapacontram1"></span></p>
    </div>

    <div class="etiqueta" id="etiqueta2">
      <p class="title">BIOBIN S.A.</p>
      <p style="display: flex; justify-content: space-between; width: 88mm">FECHA DE CARGA: <span id="fecha2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">PRODUCTO: <span id="producto2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">DESTINO: <span id="cliente2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">TERMINAL: <span id="terminal2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° REMITO: <span id="remito2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">PATENTE CAMIÓN: <span id="chasis2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° PRECINTO: <span id="precinto2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° TAPA MUESTRA: <span id="tapam2"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° TAPA CONTRAMUESTRA: <span id="tapacontram2"></span></p>
    </div>
  </div>

  <!-- Segunda fila: una etiqueta debajo de la primera -->
  <div class="fila-debajo">
    <div class="etiqueta" id="etiqueta3">
      <p class="title">BIOBIN S.A.</p>
      <p style="display: flex; justify-content: space-between; width: 88mm">FECHA DE CARGA: <span id="fecha3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">PRODUCTO: <span id="producto3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">DESTINO: <span id="cliente3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">TERMINAL: <span id="terminal3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° REMITO: <span id="remito3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">PATENTE CAMIÓN: <span id="chasis3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° PRECINTO: <span id="precinto3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° TAPA MUESTRA: <span id="tapam3"></span></p>
      <p style="display: flex; justify-content: space-between; width: 88mm">N° TAPA CONTRAMUESTRA: <span id="tapacontram3"></span></p>
    </div>
  </div>
</div>

<script>
  function formatearFechaHora(fechaHoraString) {
        if (!fechaHoraString) return '';
        
        try {
            // Intentar crear un objeto fecha
            const fecha = new Date(fechaHoraString);
            
            // Verificar si la fecha es válida
            if (isNaN(fecha.getTime())) {
                return fechaHoraString;
            }
            
            // Formatear la fecha como DD/MM/YYYY HH:MM
            const dia = fecha.getDate().toString().padStart(2, '0');
            const mes = (fecha.getMonth() + 1).toString().padStart(2, '0');
            const anio = fecha.getFullYear();
            const horas = fecha.getHours().toString().padStart(2, '0');
            const minutos = fecha.getMinutes().toString().padStart(2, '0');
            
            return `${dia}/${mes}/${anio}`;
        } catch (e) {
            console.log("Error al formatear fechahora:", e);
            return fechaHoraString;
        }
    }

  function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
  }

  function asignarValores() {
    var cantidad = parseInt(getUrlParameter('cantidad')) || 1; // Obtener cantidad o usar 1 por defecto

    for (var i = 1; i <= 3; i++) {
      var etiqueta = document.getElementById('etiqueta' + i);
      if (i > cantidad) {
        etiqueta.style.display = 'none'; // Ocultar etiquetas excedentes
        continue;
      }
    var fechaSTD = formatearFechaHora(getUrlParameter('fecha'));
      // Usando los nombres correctos de los parámetros en la URL
      document.getElementById('fecha' + i).textContent = fechaSTD || '';
      document.getElementById('producto' + i).textContent = getUrlParameter('producto') || '';
      document.getElementById('chasis' + i).textContent = getUrlParameter('chasis') || '';
      document.getElementById('remito' + i).textContent = getUrlParameter('remito') || '';
      document.getElementById('cliente' + i).textContent = getUrlParameter('cliente') || '';
      document.getElementById('terminal' + i).textContent = getUrlParameter('terminal') || '';
      document.getElementById('precinto' + i).textContent = getUrlParameter('precinto') || '';
      document.getElementById('tapam' + i).textContent = getUrlParameter('tapam') || '';
      document.getElementById('tapacontram' + i).textContent = getUrlParameter('tapacontram') || '';
    }
  }

  asignarValores();
</script>

</body>
</html>
